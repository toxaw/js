{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t);var o={addInStorage:e=>{window.localStorage.choses||(window.localStorage.choses=\"[]\");let t=JSON.parse(window.localStorage.choses);t[Object.keys(t).length]=e,window.localStorage.choses=JSON.stringify(t)},isInStorage:e=>{if(!window.localStorage.choses)return!1;let t=JSON.parse(window.localStorage.choses);for(let n in t)if(t[n]==e)return!0;return!1},removeInStorage:e=>{window.localStorage.choses||(window.localStorage.choses=\"[]\");let t=JSON.parse(window.localStorage.choses),n=[];for(let o in t)t[o]!=e&&n.push(t[o]);window.localStorage.choses=JSON.stringify(n)}};var a=function(e){let t=filmId;storageAPI.isInStorage(t)?storageAPI.removeInStorage(t):storageAPI.addInStorage(t);let n=\"fa fa-star\"+(storageAPI.isInStorage(t)?\"\":\"-o\")+\" icon\";this.className=n,elementObject.className=n};var r={findEvent:e=>{let t,n,o=document.getElementById(\"search-container\");Array.from(o.getElementsByTagName(\"input\")).forEach(e=>{\"text\"==e.type?t=e:\"checkbox\"==e.type&&(n=e)});let a=o.getElementsByClassName(\"static\")[0];t.addEventListener(\"keydown\",a=>{13==a.keyCode&&t.value&&(e(t.value),(o=document.getElementById(\"search-danger\")).innerText=\"\",n.checked=!0)}),a.addEventListener(\"mousedown\",a=>{t.value?(e(t.value),(o=document.getElementById(\"search-danger\")).innerText=\"\",n.checked=!0):n.checked=!1})},done:(e=\"\")=>{let t,n=document.getElementById(\"search-container\");Array.from(n.getElementsByTagName(\"input\")).forEach(e=>{\"checkbox\"==e.type&&(t=e)}),t.checked=!1,(n=document.getElementById(\"search-danger\")).innerText=e}};var l={setContent:(e,t,n,o)=>{let a=document.getElementsByTagName(\"main\")[0];e.forEach(function(e){let r=document.createElement(\"img\");r.src=e.src;let l=document.createElement(\"p\"),s=document.createElement(\"span\");s.className=\"fa fa-star\"+(n.isInStorage(e.id)?\"\":\"-o\")+\" icon\",s.addEventListener(\"mousedown\",function(e){let t=this.closest(\".film-element\").getAttribute(\"id\");n.isInStorage(t)?n.removeInStorage(t):n.addInStorage(t),this.className=\"fa fa-star\"+(n.isInStorage(t)?\"\":\"-o\")+\" icon\"}),l.innerText=e.text;let i=document.createElement(\"div\");i.className=\"film-element\",i.setAttribute(\"id\",e.id),i.appendChild(l),i.appendChild(s),i.appendChild(r),r.addEventListener(\"mousedown\",function(e){let a=this.closest(\".film-element\").getAttribute(\"id\");t(a,this.closest(\".film-element\").getElementsByTagName(\"span\")[0],n,o,filmId)}),a.appendChild(i)})},removeContent:()=>{let e=document.getElementsByTagName(\"main\")[0];Array.from(e.getElementsByClassName(\"film-element\")).forEach(t=>{e.removeChild(t)})}};var s=(e,t,n,o,a)=>{o.detail(e,(e,t=\"\")=>{document.getElementById(\"modal\").style.display=\"block\";let o=document.getElementById(\"modal\"),a=o.getElementsByTagName(\"p\");o.getElementsByTagName(\"img\")[0].src=\"N/A\"!=e.Poster?e.Poster:\"image/not_found.jpg\",o.getElementsByTagName(\"span\")[0].className=\"fa fa-star\"+(n.isInStorage(e.imdbID.trim())?\"\":\"-o\")+\" icon\",e.imdbID.trim();let r=(e,t)=>{e.getElementsByTagName(\"span\")[0].innerText=\"N/A\"!=t?t:\"Информация недоступна\"};r(a[0],e.Title),r(a[1],e.Released),r(a[2],e.Plot),r(a[3],e.Country),r(a[4],e.Language),r(a[5],e.imdbRating)})};var i={query:async(e,t)=>{let n=\"http://www.omdbapi.com/?s=\"+encodeURI(e.toLowerCase())+\"&apikey=d5677312\",o=\"\";try{let e=await fetch(n);t(await e.json(),o)}catch(e){console.log(e),o=\"Ошибка сервера\"}},detail:async(e,t)=>{let n=\"http://www.omdbapi.com/?i=\"+encodeURI(e)+\"&apikey=d5677312\",o=\"\";try{let e=await fetch(n);t(await e.json(),o)}catch(e){console.log(e),o=\"Ошибка сервера\"}}};document.getElementById(\"modal\").getElementsByTagName(\"span\")[0].addEventListener(\"mousedown\",a),document.getElementById(\"modal\").addEventListener(\"mousedown\",function(e){\"span\"!=e.target.localName&&(this.style.display=\"none\")}),r.findEvent(e=>{i.query(e,(e,t=null)=>{if(l.removeContent(),e&&e.Search){let t=[];Array.from(e.Search).forEach(e=>{t.push({src:\"N/A\"!=e.Poster?e.Poster:\"image/not_found.jpg\",text:e.Title+\" \"+(\"N/A\"!=e.Year?`(${e.Year} год)`:\"\"),id:e.imdbID.trim()})}),l.setContent(t,s,o,i,void 0),r.done()}else t||e.Search?r.done(t||\"\"):r.done(\"Поиск не дал результатов\")})})}]);","extractedComments":[]}